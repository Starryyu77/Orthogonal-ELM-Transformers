# Phase 1 实验报告: BERT XNLI

> 验证 OELM (冻结 Q/K + 正交初始化) 在 BERT 编码器上的有效性

---

## 1. 实验目标

验证分头正交初始化配合冻结Q/K参数在BERT架构上的效果：
- 准确率对比：OELM-Freeze vs Baseline
- 训练速度对比：时间效率和每步耗时
- 参数效率：冻结参数比例

---

## 2. 实验设计

### 2.1 数据集

| 属性 | 详情 |
|------|------|
| 名称 | XNLI (Cross-lingual NLI) |
| 任务 | 自然语言推理 (3分类) |
| 语言 | 英语 (en) |
| 训练集 | 392,702 (使用MNLI) |
| 验证集 | 2,490 |

### 2.2 模型配置

| 配置 | 值 |
|------|-----|
| 模型 | bert-base-uncased |
| 隐藏层维度 | 768 |
| 注意力头数 | 12 |
| 层数 | 12 |

### 2.3 训练配置

| 配置 | Baseline | OELM-Freeze |
|------|----------|-------------|
| 学习率 | 2e-5 | 1e-4 |
| Batch Size | 16 | 16 |
| Epochs | 3 | 3 |
| 冻结Q/K | ❌ | ✅ |
| 初始化 | 标准随机 | 分头正交 |

---

## 3. 实验结果

### 3.1 性能指标

| 指标 | Baseline | OELM-Freeze | 对比 |
|------|----------|-------------|------|
| **最佳准确率** | 76.71% | **77.79%** | **+1.08%** ✅ |
| 最终Loss | 0.523 | 0.498 | -4.8% |
| 收敛速度 | 2.5 epochs | 2.0 epochs | 更快 |

### 3.2 训练效率

| 指标 | Baseline | OELM-Freeze | 对比 |
|------|----------|-------------|------|
| **纯训练时间** | 11,971s | **5,138s** | **-57.1%** ⭐ |
| **每步时间** | 0.162s | **0.069s** | **-57.2%** ⭐ |
| 总步数 | 73,632 | 73,632 | 相同 |

### 3.3 参数统计

| 模型 | 可训练参数 | 冻结参数 | 比例 |
|------|-----------|----------|------|
| **Baseline** | 109,484,547 (100%) | 0 | 0% |
| **OELM-Freeze** | 95,310,339 (87.1%) | 14,174,208 | 12.9% |

---

## 4. 关键发现

### 4.1 ✅ OELM在分类任务上有效

- **准确率提升**: OELM-Freeze (77.79%) 优于 Baseline (76.71%)
- **训练速度提升**: 每步时间减少57%，从0.162s降至0.069s
- **参数节省**: 冻结12.9%参数 (14.2M)

### 4.2 效率分析

```
总时间增加原因分析:
- 纯训练时间减少57%
- 但验证和日志记录时间固定
- 小批量(batch size 16)导致更多验证次数
```

---

## 5. 结论

### 5.1 主要结论

✅ **OELM-Freeze在BERT编码器上验证成功**
- 准确率提升 +1.08%
- 训练速度提升 57%
- 参数减少 12.9%

✅ **冻结Q/K在分类任务上可行**
- 不会损失性能
- 显著提升训练效率

### 5.2 对后续实验的启示

- BERT上的成功鼓励我们在GPT上尝试
- 但需注意：生成任务可能与分类任务不同

---

## 6. 相关文件

### 代码位置
```
models/
├── modeling_bert_oelm.py   # OELM BERT模型
└── train_bert.py           # 训练脚本
```

### 实验输出
```
outputs/
└── xnli/
    ├── baseline/           # XNLI-01结果
    └── oelm_freeze/        # XNLI-02结果
```

---

**报告生成时间**: 2026-02-12
**实验完成时间**: 2026-02-08
